{"version":3,"file":"js/816.228441db.js","mappings":"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","sources":["webpack://e-commerce-s01/./src/components/models/S01/modelConfig.ts","webpack://e-commerce-s01/./src/stores/useDataStore.ts","webpack://e-commerce-s01/./src/components/global/Coupon/index.vue?7c29","webpack://e-commerce-s01/./src/components/global/Coupon/index.vue","webpack://e-commerce-s01/./src/components/global/Coupon/index.vue?053f"],"sourcesContent":["import type { Coupon } from \"@/@types\";\n// 運行模組\nexport type ModelConfig = {\n  createNewProduct: boolean;\n  createNewCoupon: boolean;\n  checkProductSwitch: boolean;\n  editProducts: boolean;\n  productsId: string;\n  editCoupon: boolean;\n  couponId: Coupon;\n  userDataSwitch: boolean;\n};\n\nconst modelConfig: ModelConfig = {\n  createNewProduct: false, // 新增產品畫面開關   NewProduct > index.vue\n  createNewCoupon: false, // 新增優惠券畫面開關\n  checkProductSwitch: false, // see more畫面開關\n  editProducts: true, // true -> 編輯產品 , false -> 新增產品\n  productsId: \"\", // 確認產品Id edit用\n  editCoupon: true,\n  couponId: {} as Coupon,\n  userDataSwitch: false, // 客戶資訊頁面\n};\n\nexport default modelConfig;\nexport { modelConfig };\n","// import axios from \"axios\";\nimport { defineStore } from \"pinia\";\nimport config from \"../../config/dev.env\";\nimport errInterceptors from \"@/errInterceptors\";\n\n//回傳的值(product list)設定型別\ninterface UpdateProductsList {\n  category: string;\n  content: string;\n  description: string;\n  id: string;\n  imageUrl: string;\n  is_enabled: number;\n  origin_price: number;\n  price: number;\n  title: string;\n  unit: string;\n  num: number;\n  image: string;\n}\n\ninterface UpdateProductList {\n  category: string;\n  content: string;\n  description: string;\n  id: string;\n  imageUrl: string;\n  is_enabled: number;\n  origin_price: number;\n  price: number;\n  title: string;\n  unit: string;\n  num: number;\n  image: string;\n}\n\ninterface UpdatePagination {\n  category: null;\n  current_page: number;\n  has_next: boolean;\n  has_pre: boolean;\n  total_pages: number;\n}\n\ninterface updateCartsItem {\n  category: string;\n  content: string;\n  description: string;\n  id: string;\n  imageUrl: string;\n  is_enabled: number;\n  origin_price: number;\n  price: number;\n  title: string;\n  unit: string;\n  num: number;\n  image: string;\n}\n\ninterface updateCartsAllItems {\n  final_total: number;\n  id: string;\n  product: updateCartsItem;\n  product_id: string;\n  qty: number;\n  total: number;\n}\n\ntype UpdateCouponList = {\n  title: string;\n  is_enabled: number;\n  percent: number;\n  due_date: number;\n  code: string;\n  id: string;\n  num: number;\n};\ntype CouponPagination = {\n  category: null;\n  current_page: number;\n  has_next: boolean;\n  has_pre: boolean;\n  total_pages: number;\n};\n\ntype UseDataStore = {\n  products: UpdateProductsList[];\n  product: UpdateProductList;\n  cartsItem: updateCartsAllItems[];\n  pagination: UpdatePagination;\n  message: string;\n  alertSwitch: boolean;\n  stopMessageSwitch: boolean;\n  isLoading: boolean;\n  final_total: number;\n  total: number;\n  updateCouponList: UpdateCouponList[];\n  couponPagination: CouponPagination;\n  signInCheck: boolean;\n};\n\nconst useDataStore = defineStore({\n  id: \"Data\",\n  state: (): UseDataStore => ({\n    products: [],\n    product: {} as UpdateProductList,\n    cartsItem: [],\n    pagination: {\n      category: null,\n      current_page: 1,\n      has_next: false,\n      has_pre: false,\n      total_pages: 1,\n    },\n    message: \"\",\n    alertSwitch: false,\n    stopMessageSwitch: false,\n    isLoading: false,\n    final_total: 0,\n    total: 0,\n    updateCouponList: [],\n    couponPagination: {\n      category: null,\n      current_page: 1,\n      has_next: false,\n      has_pre: false,\n      total_pages: 1,\n    },\n    signInCheck: false,\n  }),\n  getters: {\n    getLoginStatus(state) {\n      return state.signInCheck;\n    },\n  },\n  actions: {\n    // 產品畫面更新\n    // async getProducts(page = 1) {\n    //   try {\n    //     this.isLoading = true;\n    //     const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/products?page=${page}`;\n    //     const response = await axios.get(api);\n    //     this.products = response.data.products;\n    //     this.pagination = response.data.pagination;\n    //     console.log(\"response:\", response);\n    //     this.isLoading = false;\n    //   } catch (error) {\n    //     console.error(error);\n    //   }\n    // },\n    // FIXME:\n    async getProducts(page = 1) {\n      this.isLoading = true;\n      const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/products?page=${page}`;\n      const response = await errInterceptors.get(api);\n      this.products = response.data.products;\n      this.pagination = response.data.pagination;\n      console.log(\"response:\", response);\n      this.isLoading = false;\n    },\n\n    async getProduct(id: string) {\n      const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/product/${id}`;\n      const response = await errInterceptors.get(api);\n      this.product = response.data.product;\n      // console.log(response);\n    },\n\n    async getCartsItem() {\n      const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/cart`;\n      const response = await errInterceptors.get(api);\n      this.cartsItem = response.data.data.carts;\n      this.total = response.data.data.total;\n      this.final_total = response.data.data.final_total;\n      // console.log(response);\n      // console.log(this.cartsItem);\n    },\n\n    // async checkSingIn() {\n    //   const api = `${config.API_PATH}/api/user/check`;\n    //   const response = await errInterceptors.post(api);\n    //   if (response.data.success) {\n    //     this.signInCheck = true;\n    //     console.log(\"登入狀態為(pinia):\", response.data.success);\n    //   } else {\n    //     this.signInCheck = false;\n    //     console.log(\"登入狀態為(pinia):\", response.data.success);\n    //   }\n    // },\n\n    async getCouponList(page = 1) {\n      const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/coupons?page=${page}`;\n      const response = await errInterceptors.get(api);\n      this.updateCouponList = response.data.coupons;\n      this.couponPagination = response.data.pagination;\n      // console.log(response);\n    },\n\n    errorMessage(msg: string) {\n      if (this.stopMessageSwitch) return;\n      this.message = msg;\n      this.alertSwitch = true;\n      this.autoCloseMessage();\n    },\n\n    autoCloseMessage() {\n      setTimeout(() => {\n        this.message = \"\";\n        this.alertSwitch = false;\n      }, 5000);\n    },\n\n    actionLoginStatus() {\n      this.signInCheck = !this.signInCheck;\n    },\n  },\n  // actions: {\n  //   // 產品畫面更新\n  //   async getProducts(page = 1) {\n  //     try {\n  //       this.isLoading = true;\n  //       const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/products?page=${page}`;\n  //       const response = await axios.get(api);\n  //       this.products = response.data.products;\n  //       this.pagination = response.data.pagination;\n  //       console.log(response);\n  //       this.isLoading = false;\n  //     } catch (error) {\n  //       console.error(error);\n  //     }\n  //   },\n\n  //   async getProduct(id: string) {\n  //     try {\n  //       const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/product/${id}`;\n  //       const response = await axios.get(api);\n  //       this.product = response.data.product;\n  //       console.log(response);\n  //     } catch (error) {\n  //       console.error(error);\n  //     }\n  //   },\n\n  //   async getCartsItem() {\n  //     try {\n  //       const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/cart`;\n  //       const response = await axios.get(api);\n  //       this.cartsItem = response.data.data.carts;\n  //       this.total = response.data.data.total;\n  //       this.final_total = response.data.data.final_total;\n  //       console.log(response);\n  //       console.log(this.cartsItem);\n  //     } catch (error) {\n  //       console.error(error);\n  //     }\n  //   },\n  //   async checkSingIn() {\n  //     const api = `${config.API_PATH}/api/user/check`;\n  //     try {\n  //       const response = await axios.post(api);\n  //       if (response.data.success) {\n  //         this.signInCheck = true;\n  //       } else {\n  //         this.signInCheck = false;\n  //       }\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   },\n\n  //   async getCouponList(page = 1) {\n  //     try {\n  //       const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/coupons?page=${page}`;\n  //       const response = await axios.get(api);\n  //       this.updateCouponList = response.data.coupons;\n  //       this.couponPagination = response.data.pagination;\n  //       console.log(response);\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   },\n\n  //   errorMessage(msg: string) {\n  //     if (this.stopMessageSwitch) return;\n  //     this.message = msg;\n  //     this.alertSwitch = true;\n  //     this.autoCloseMessage();\n  //   },\n\n  //   autoCloseMessage() {\n  //     setTimeout(() => {\n  //       this.message = \"\";\n  //       this.alertSwitch = false;\n  //     }, 5000);\n  //   },\n  // },\n});\n\nexport default useDataStore;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-68cc4e95\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"coupon-wrap\" }\nconst _hoisted_2 = { class: \"coupons\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [\n  /*#__PURE__*/_createElementVNode(\"tr\", null, [\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"Due_Date\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"Title\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"Code\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"Percent\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"Is_Enabled\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"Edit\")\n  ])\n], -1))\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"pagination\" }\nconst _hoisted_7 = { class: \"left-btn\" }\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = { class: \"right-btn\" }\n\nimport { ref, computed } from \"vue\";\nimport Loading from \"vue-loading-overlay\";\nimport \"vue-loading-overlay/dist/css/index.css\";\nimport useDataStore from \"../../../stores/useDataStore\";\nimport modelConfig from \"@/components/models/S01/modelConfig\";\nimport config from \"../../../../config/dev.env\";\nimport errInterceptors from \"@/errInterceptors\";\n\nimport type { Coupon } from \"@/@types\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\n// import axios from \"axios\";\nconst dataStore = useDataStore();\n\nconst modelConfigController = ref(modelConfig); //控制模型\n\nconst isLoading = ref(false);\n\nconst updateCouponList = computed(() => dataStore.updateCouponList);\n\nconst pagination = computed(() => dataStore.couponPagination);\n\n// 建立新優惠券\nconst createNewCoupon = () => {\n  return (\n    (modelConfigController.value.createNewCoupon = true),\n    (modelConfigController.value.editCoupon = false)\n  );\n};\n\nconst deleteCoupon = async (id: string) => {\n  isLoading.value = true;\n  const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/coupon/${id}`;\n  const response = await errInterceptors.delete(api);\n  console.log(response);\n  console.log(\"刪除成功\");\n  dataStore.getCouponList();\n  isLoading.value = false;\n};\n// const deleteCoupon = async (id: string) => {\n//   isLoading.value = true;\n//   const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/coupon/${id}`;\n//   try {\n//     const response = await axios.delete(api);\n//     console.log(response);\n//     console.log(\"刪除成功\");\n//   } catch (error) {\n//     console.log(error);\n//     console.log(\"刪除失敗\");\n//   } finally {\n//     dataStore.getCouponList();\n//     isLoading.value = false;\n//   }\n// };\n\nconst editBtnController = (coupon: Coupon) => {\n  modelConfigController.value.editCoupon = true;\n  modelConfigController.value.createNewCoupon = true;\n  modelConfigController.value.couponId = coupon;\n};\n\nconst dateTransfer = (t: number) => {\n  if (!t) return;\n  return new Date(t * 1000).toISOString().replace(\"T\", \" \").substring(0, 19);\n};\n\n// const checkSingIn = async () => {\n//   const api = `${config.API_PATH}/api/user/check`;\n//   const response = await errInterceptors.post(api);\n//   if (response.data.success) {\n//     console.log(\"登入狀態為(Coupon):\", response.data.success);\n//   } else {\n//     console.log(\"登入狀態為(Coupon):\", response.data.success);\n//   }\n// };\n// checkSingIn();\ndataStore.getCouponList();\n// dataStore.checkSingIn();\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(Loading), {\n      active: isLoading.value,\n      \"onUpdate:active\": _cache[0] || (_cache[0] = ($event: any) => ((isLoading).value = $event))\n    }, null, 8, [\"active\"]),\n    _createElementVNode(\"div\", { class: \"create-btn\" }, [\n      _createElementVNode(\"button\", {\n        class: \"btn\",\n        onClick: createNewCoupon\n      }, \"NewCoupon\")\n    ]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"table\", null, [\n        _hoisted_3,\n        _createElementVNode(\"tbody\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(updateCouponList.value, (coupon, index) => {\n            return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n              _createElementVNode(\"td\", null, _toDisplayString(dateTransfer(coupon.due_date)), 1),\n              _createElementVNode(\"td\", null, _toDisplayString(coupon.title), 1),\n              _createElementVNode(\"td\", null, _toDisplayString(coupon.code), 1),\n              _createElementVNode(\"td\", null, _toDisplayString(coupon.percent), 1),\n              _createElementVNode(\"td\", null, _toDisplayString(coupon.is_enabled == 1 ? \"啟用\" : \"未啟用\"), 1),\n              _createElementVNode(\"td\", null, [\n                _createElementVNode(\"button\", {\n                  class: \"edit\",\n                  onClick: ($event: any) => (editBtnController(coupon))\n                }, \" Edit \", 8, _hoisted_4),\n                _createElementVNode(\"button\", {\n                  class: \"delete\",\n                  onClick: ($event: any) => (deleteCoupon(coupon.id))\n                }, \" Delete \", 8, _hoisted_5)\n              ])\n            ]))\n          }), 128))\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (_unref(dataStore).getCouponList(pagination.value.current_page - 1)), [\"prevent\"])),\n          class: _normalizeClass([\"left\", { disabled: !pagination.value.has_pre }])\n        }, \" << \", 2)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pagination.value.total_pages, (pages, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"pages-btn\",\n          key: index\n        }, [\n          _createElementVNode(\"button\", {\n            class: _normalizeClass([\n            `pages-${pages}`,\n            { active: pagination.value.current_page === pages },\n          ]),\n            onClick: _withModifiers(($event: any) => (_unref(dataStore).getCouponList(pages)), [\"prevent\"])\n          }, _toDisplayString(pages), 11, _hoisted_8)\n        ]))\n      }), 128)),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[2] || (_cache[2] = _withModifiers(($event: any) => (_unref(dataStore).getCouponList(pagination.value.current_page + 1)), [\"prevent\"])),\n          class: _normalizeClass([\"right\", { disabled: !pagination.value.has_next }])\n        }, \" >> \", 2)\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"coupon-wrap\">\n    <loading v-model:active=\"isLoading\" />\n    <div class=\"create-btn\">\n      <button class=\"btn\" @click=\"createNewCoupon\">NewCoupon</button>\n    </div>\n    <div class=\"coupons\">\n      <table>\n        <thead>\n          <tr>\n            <td>Due_Date</td>\n            <td>Title</td>\n            <td>Code</td>\n            <td>Percent</td>\n            <td>Is_Enabled</td>\n            <td>Edit</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(coupon, index) in updateCouponList\" :key=\"index\">\n            <td>{{ dateTransfer(coupon.due_date) }}</td>\n            <td>{{ coupon.title }}</td>\n            <td>{{ coupon.code }}</td>\n            <td>{{ coupon.percent }}</td>\n            <td>{{ coupon.is_enabled == 1 ? \"啟用\" : \"未啟用\" }}</td>\n            <td>\n              <button class=\"edit\" @click=\"editBtnController(coupon)\">\n                Edit\n              </button>\n              <button class=\"delete\" @click=\"deleteCoupon(coupon.id)\">\n                Delete\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"pagination\">\n      <div class=\"left-btn\">\n        <button\n          @click.prevent=\"dataStore.getCouponList(pagination.current_page - 1)\"\n          class=\"left\"\n          :class=\"{ disabled: !pagination.has_pre }\"\n        >\n          &lt;&lt;\n        </button>\n      </div>\n\n      <div\n        class=\"pages-btn\"\n        v-for=\"(pages, index) in pagination.total_pages\"\n        :key=\"index\"\n      >\n        <button\n          :class=\"[\n            `pages-${pages}`,\n            { active: pagination.current_page === pages },\n          ]\"\n          @click.prevent=\"dataStore.getCouponList(pages)\"\n        >\n          {{ pages }}\n        </button>\n      </div>\n      <div class=\"right-btn\">\n        <button\n          @click.prevent=\"dataStore.getCouponList(pagination.current_page + 1)\"\n          class=\"right\"\n          :class=\"{ disabled: !pagination.has_next }\"\n        >\n          >>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n// import axios from \"axios\";\nimport { ref, computed } from \"vue\";\nimport Loading from \"vue-loading-overlay\";\nimport \"vue-loading-overlay/dist/css/index.css\";\nimport useDataStore from \"../../../stores/useDataStore\";\nimport modelConfig from \"@/components/models/S01/modelConfig\";\nimport config from \"../../../../config/dev.env\";\nimport errInterceptors from \"@/errInterceptors\";\n\nimport type { Coupon } from \"@/@types\";\n\nconst dataStore = useDataStore();\n\nconst modelConfigController = ref(modelConfig); //控制模型\n\nconst isLoading = ref(false);\n\nconst updateCouponList = computed(() => dataStore.updateCouponList);\n\nconst pagination = computed(() => dataStore.couponPagination);\n\n// 建立新優惠券\nconst createNewCoupon = () => {\n  return (\n    (modelConfigController.value.createNewCoupon = true),\n    (modelConfigController.value.editCoupon = false)\n  );\n};\n\nconst deleteCoupon = async (id: string) => {\n  isLoading.value = true;\n  const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/coupon/${id}`;\n  const response = await errInterceptors.delete(api);\n  console.log(response);\n  console.log(\"刪除成功\");\n  dataStore.getCouponList();\n  isLoading.value = false;\n};\n// const deleteCoupon = async (id: string) => {\n//   isLoading.value = true;\n//   const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/coupon/${id}`;\n//   try {\n//     const response = await axios.delete(api);\n//     console.log(response);\n//     console.log(\"刪除成功\");\n//   } catch (error) {\n//     console.log(error);\n//     console.log(\"刪除失敗\");\n//   } finally {\n//     dataStore.getCouponList();\n//     isLoading.value = false;\n//   }\n// };\n\nconst editBtnController = (coupon: Coupon) => {\n  modelConfigController.value.editCoupon = true;\n  modelConfigController.value.createNewCoupon = true;\n  modelConfigController.value.couponId = coupon;\n};\n\nconst dateTransfer = (t: number) => {\n  if (!t) return;\n  return new Date(t * 1000).toISOString().replace(\"T\", \" \").substring(0, 19);\n};\n\n// const checkSingIn = async () => {\n//   const api = `${config.API_PATH}/api/user/check`;\n//   const response = await errInterceptors.post(api);\n//   if (response.data.success) {\n//     console.log(\"登入狀態為(Coupon):\", response.data.success);\n//   } else {\n//     console.log(\"登入狀態為(Coupon):\", response.data.success);\n//   }\n// };\n// checkSingIn();\ndataStore.getCouponList();\n// dataStore.checkSingIn();\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./index.scss\";\n</style>\n","import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./index.vue?vue&type=style&index=0&id=68cc4e95&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-68cc4e95\"]])\n\nexport default __exports__"],"names":["modelConfig","createNewProduct","createNewCoupon","checkProductSwitch","editProducts","productsId","editCoupon","couponId","userDataSwitch","useDataStore","defineStore","id","state","products","product","cartsItem","pagination","category","current_page","has_next","has_pre","total_pages","message","alertSwitch","stopMessageSwitch","isLoading","final_total","total","updateCouponList","couponPagination","signInCheck","getters","getLoginStatus","actions","getProducts","page","this","api","config","API_PATH","CUSTOM_PATH","response","errInterceptors","get","data","console","log","getProduct","getCartsItem","carts","getCouponList","coupons","errorMessage","msg","autoCloseMessage","setTimeout","actionLoginStatus","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_defineComponent","__name","setup","__props","dataStore","modelConfigController","ref","computed","value","deleteCoupon","async","delete","editBtnController","coupon","dateTransfer","t","Date","toISOString","replace","substring","_ctx","_cache","_openBlock","_createElementBlock","_createVNode","_unref","Loading","active","$event","onClick","_Fragment","_renderList","index","key","_toDisplayString","due_date","title","code","percent","is_enabled","_withModifiers","_normalizeClass","disabled","pages","__exports__"],"sourceRoot":""}