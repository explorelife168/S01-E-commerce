"use strict";(self["webpackChunke_commerce_s01"]=self["webpackChunke_commerce_s01"]||[]).push([[969],{7010:function(t,a,e){e.d(a,{W:function(){return s}});const s={createNewProduct:!1,createNewCoupon:!1,checkProductSwitch:!1,editProducts:!0,productsId:"",editCoupon:!0,couponId:{},userDataSwitch:!1};a.Z=s},6823:function(t,a,e){var s=e(9321),n=e(2835),c=e(9999);const i=(0,s.Q_)({id:"Data",state:()=>({products:[],product:{},cartsItem:[],pagination:{category:null,current_page:1,has_next:!1,has_pre:!1,total_pages:1},message:"",alertSwitch:!1,stopMessageSwitch:!1,isLoading:!1,final_total:0,total:0,updateCouponList:[],couponPagination:{category:null,current_page:1,has_next:!1,has_pre:!1,total_pages:1},signInCheck:!1}),getters:{getLoginStatus(t){return t.signInCheck}},actions:{async getProducts(t=1){this.isLoading=!0;const a=`${n.Z.API_PATH}/api/${n.Z.CUSTOM_PATH}/products?page=${t}`,e=await c.Z.get(a);this.products=e.data.products,this.pagination=e.data.pagination,console.log("response:",e),this.isLoading=!1},async getProduct(t){const a=`${n.Z.API_PATH}/api/${n.Z.CUSTOM_PATH}/product/${t}`,e=await c.Z.get(a);this.product=e.data.product},async getCartsItem(){const t=`${n.Z.API_PATH}/api/${n.Z.CUSTOM_PATH}/cart`,a=await c.Z.get(t);this.cartsItem=a.data.data.carts,this.total=a.data.data.total,this.final_total=a.data.data.final_total},async getCouponList(t=1){const a=`${n.Z.API_PATH}/api/${n.Z.CUSTOM_PATH}/admin/coupons?page=${t}`,e=await c.Z.get(a);this.updateCouponList=e.data.coupons,this.couponPagination=e.data.pagination},errorMessage(t){this.stopMessageSwitch||(this.message=t,this.alertSwitch=!0,this.autoCloseMessage())},autoCloseMessage(){setTimeout((()=>{this.message="",this.alertSwitch=!1}),5e3)},actionLoginStatus(){this.signInCheck=!this.signInCheck}}});a.Z=i},5368:function(t,a,e){function s(t){const a=Number(t);return`$${a.toFixed(0).replace(/./g,((t,a,e)=>{const s=a&&"."!==t&&(e.length-a)%3===0?`, ${t}`.replace(/\s/g,""):t;return s}))}`}e.d(a,{Z:function(){return s}})},4969:function(t,a,e){e.r(a),e.d(a,{default:function(){return I}});var s=e(3396),n=e(4870),c=e(7139),i=e(9242),o=e(5513),l=e.n(o),u=e(6823),d=e(7010),r=e(2835),p=e(5368),g=e(9999);const _=t=>((0,s.dD)("data-v-b08c9b12"),t=t(),(0,s.Cn)(),t),h={class:"product-wrap"},v={class:"products"},C=_((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",null,"分類"),(0,s._)("td",null,"名稱"),(0,s._)("td",null,"原價"),(0,s._)("td",null,"售價"),(0,s._)("td",null,"是否啟用"),(0,s._)("td",null,"編輯")])],-1))),P=["onClick"],w=["onClick"],Z={class:"pagination"},b={class:"left-btn"},k=["onClick"],S={class:"right-btn"};var $=(0,s.aZ)({__name:"index",setup(t){const a=(0,u.Z)(),e=(0,n.iH)(d.Z),o=(0,n.iH)(!1),_=(0,s.Fl)((()=>a.products)),$=(0,s.Fl)((()=>a.pagination)),f=()=>(e.value.editProducts=!1,e.value.createNewProduct=!0),m=async t=>{o.value=!0;const e=`${r.Z.API_PATH}/api/${r.Z.CUSTOM_PATH}/admin/product/${t}`,s=await g.Z.delete(e,{data:t});s.data.success&&console.log("刪除商品成功"),a.getProducts(),o.value=!1},I=t=>{e.value.createNewProduct=!0,e.value.editProducts=!0,e.value.productsId=t.id};return a.getProducts(),(t,e)=>((0,s.wg)(),(0,s.iD)("div",h,[(0,s.Wm)((0,n.SU)(l()),{active:o.value,"onUpdate:active":e[0]||(e[0]=t=>o.value=t)},null,8,["active"]),(0,s._)("div",{class:"create-btn"},[(0,s._)("button",{class:"btn",onClick:f},"建立新的產品")]),(0,s._)("div",v,[(0,s._)("table",null,[C,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.value,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,(0,c.zw)(t.category),1),(0,s._)("td",null,(0,c.zw)(t.title),1),(0,s._)("td",null,(0,c.zw)((0,n.SU)(p.Z)(t.origin_price)),1),(0,s._)("td",null,(0,c.zw)((0,n.SU)(p.Z)(t.price)),1),(0,s._)("td",null,(0,c.zw)(1==t.is_enabled?"啟用":"未啟用"),1),(0,s._)("td",null,[(0,s._)("button",{class:"edit",onClick:a=>I(t)},"編輯",8,P),(0,s._)("button",{class:"delete",onClick:a=>m(t.id)}," 刪除 ",8,w)])])))),128))])])]),(0,s._)("div",Z,[(0,s._)("div",b,[(0,s._)("button",{onClick:e[1]||(e[1]=(0,i.iM)((t=>(0,n.SU)(a).getProducts($.value.current_page-1)),["prevent"])),class:(0,c.C_)(["left",{disabled:!$.value.has_pre}])}," << ",2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.value.total_pages,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"pages-btn",key:e},[(0,s._)("button",{class:(0,c.C_)([`pages-${t}`,{active:$.value.current_page===t}]),onClick:(0,i.iM)((e=>(0,n.SU)(a).getProducts(t)),["prevent"])},(0,c.zw)(t),11,k)])))),128)),(0,s._)("div",S,[(0,s._)("button",{onClick:e[2]||(e[2]=(0,i.iM)((t=>(0,n.SU)(a).getProducts($.value.current_page+1)),["prevent"])),class:(0,c.C_)(["right",{disabled:!$.value.has_next}])}," >> ",2)])])]))}}),f=e(89);const m=(0,f.Z)($,[["__scopeId","data-v-b08c9b12"]]);var I=m}}]);
//# sourceMappingURL=969.ad3fc711.js.map