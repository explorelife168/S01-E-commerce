{"version":3,"file":"js/969.ad3fc711.js","mappings":"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","sources":["webpack://e-commerce-s01/./src/components/models/S01/modelConfig.ts","webpack://e-commerce-s01/./src/stores/useDataStore.ts","webpack://e-commerce-s01/./src/utils/filters/currency.ts","webpack://e-commerce-s01/./src/components/global/Products/index.vue?a891","webpack://e-commerce-s01/./src/components/global/Products/index.vue","webpack://e-commerce-s01/./src/components/global/Products/index.vue?68ad"],"sourcesContent":["import type { Coupon } from \"@/@types\";\n// 運行模組\nexport type ModelConfig = {\n  createNewProduct: boolean;\n  createNewCoupon: boolean;\n  checkProductSwitch: boolean;\n  editProducts: boolean;\n  productsId: string;\n  editCoupon: boolean;\n  couponId: Coupon;\n  userDataSwitch: boolean;\n};\n\nconst modelConfig: ModelConfig = {\n  createNewProduct: false, // 新增產品畫面開關   NewProduct > index.vue\n  createNewCoupon: false, // 新增優惠券畫面開關\n  checkProductSwitch: false, // see more畫面開關\n  editProducts: true, // true -> 編輯產品 , false -> 新增產品\n  productsId: \"\", // 確認產品Id edit用\n  editCoupon: true,\n  couponId: {} as Coupon,\n  userDataSwitch: false, // 客戶資訊頁面\n};\n\nexport default modelConfig;\nexport { modelConfig };\n","// import axios from \"axios\";\nimport { defineStore } from \"pinia\";\nimport config from \"../../config/dev.env\";\nimport errInterceptors from \"@/errInterceptors\";\n\n//回傳的值(product list)設定型別\ninterface UpdateProductsList {\n  category: string;\n  content: string;\n  description: string;\n  id: string;\n  imageUrl: string;\n  is_enabled: number;\n  origin_price: number;\n  price: number;\n  title: string;\n  unit: string;\n  num: number;\n  image: string;\n}\n\ninterface UpdateProductList {\n  category: string;\n  content: string;\n  description: string;\n  id: string;\n  imageUrl: string;\n  is_enabled: number;\n  origin_price: number;\n  price: number;\n  title: string;\n  unit: string;\n  num: number;\n  image: string;\n}\n\ninterface UpdatePagination {\n  category: null;\n  current_page: number;\n  has_next: boolean;\n  has_pre: boolean;\n  total_pages: number;\n}\n\ninterface updateCartsItem {\n  category: string;\n  content: string;\n  description: string;\n  id: string;\n  imageUrl: string;\n  is_enabled: number;\n  origin_price: number;\n  price: number;\n  title: string;\n  unit: string;\n  num: number;\n  image: string;\n}\n\ninterface updateCartsAllItems {\n  final_total: number;\n  id: string;\n  product: updateCartsItem;\n  product_id: string;\n  qty: number;\n  total: number;\n}\n\ntype UpdateCouponList = {\n  title: string;\n  is_enabled: number;\n  percent: number;\n  due_date: number;\n  code: string;\n  id: string;\n  num: number;\n};\ntype CouponPagination = {\n  category: null;\n  current_page: number;\n  has_next: boolean;\n  has_pre: boolean;\n  total_pages: number;\n};\n\ntype UseDataStore = {\n  products: UpdateProductsList[];\n  product: UpdateProductList;\n  cartsItem: updateCartsAllItems[];\n  pagination: UpdatePagination;\n  message: string;\n  alertSwitch: boolean;\n  stopMessageSwitch: boolean;\n  isLoading: boolean;\n  final_total: number;\n  total: number;\n  updateCouponList: UpdateCouponList[];\n  couponPagination: CouponPagination;\n  signInCheck: boolean;\n};\n\nconst useDataStore = defineStore({\n  id: \"Data\",\n  state: (): UseDataStore => ({\n    products: [],\n    product: {} as UpdateProductList,\n    cartsItem: [],\n    pagination: {\n      category: null,\n      current_page: 1,\n      has_next: false,\n      has_pre: false,\n      total_pages: 1,\n    },\n    message: \"\",\n    alertSwitch: false,\n    stopMessageSwitch: false,\n    isLoading: false,\n    final_total: 0,\n    total: 0,\n    updateCouponList: [],\n    couponPagination: {\n      category: null,\n      current_page: 1,\n      has_next: false,\n      has_pre: false,\n      total_pages: 1,\n    },\n    signInCheck: false,\n  }),\n  getters: {\n    getLoginStatus(state) {\n      return state.signInCheck;\n    },\n  },\n  actions: {\n    // 產品畫面更新\n    // async getProducts(page = 1) {\n    //   try {\n    //     this.isLoading = true;\n    //     const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/products?page=${page}`;\n    //     const response = await axios.get(api);\n    //     this.products = response.data.products;\n    //     this.pagination = response.data.pagination;\n    //     console.log(\"response:\", response);\n    //     this.isLoading = false;\n    //   } catch (error) {\n    //     console.error(error);\n    //   }\n    // },\n    // FIXME:\n    async getProducts(page = 1) {\n      this.isLoading = true;\n      const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/products?page=${page}`;\n      const response = await errInterceptors.get(api);\n      this.products = response.data.products;\n      this.pagination = response.data.pagination;\n      console.log(\"response:\", response);\n      this.isLoading = false;\n    },\n\n    async getProduct(id: string) {\n      const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/product/${id}`;\n      const response = await errInterceptors.get(api);\n      this.product = response.data.product;\n      // console.log(response);\n    },\n\n    async getCartsItem() {\n      const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/cart`;\n      const response = await errInterceptors.get(api);\n      this.cartsItem = response.data.data.carts;\n      this.total = response.data.data.total;\n      this.final_total = response.data.data.final_total;\n      // console.log(response);\n      // console.log(this.cartsItem);\n    },\n\n    // async checkSingIn() {\n    //   const api = `${config.API_PATH}/api/user/check`;\n    //   const response = await errInterceptors.post(api);\n    //   if (response.data.success) {\n    //     this.signInCheck = true;\n    //     console.log(\"登入狀態為(pinia):\", response.data.success);\n    //   } else {\n    //     this.signInCheck = false;\n    //     console.log(\"登入狀態為(pinia):\", response.data.success);\n    //   }\n    // },\n\n    async getCouponList(page = 1) {\n      const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/coupons?page=${page}`;\n      const response = await errInterceptors.get(api);\n      this.updateCouponList = response.data.coupons;\n      this.couponPagination = response.data.pagination;\n      // console.log(response);\n    },\n\n    errorMessage(msg: string) {\n      if (this.stopMessageSwitch) return;\n      this.message = msg;\n      this.alertSwitch = true;\n      this.autoCloseMessage();\n    },\n\n    autoCloseMessage() {\n      setTimeout(() => {\n        this.message = \"\";\n        this.alertSwitch = false;\n      }, 5000);\n    },\n\n    actionLoginStatus() {\n      this.signInCheck = !this.signInCheck;\n    },\n  },\n  // actions: {\n  //   // 產品畫面更新\n  //   async getProducts(page = 1) {\n  //     try {\n  //       this.isLoading = true;\n  //       const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/products?page=${page}`;\n  //       const response = await axios.get(api);\n  //       this.products = response.data.products;\n  //       this.pagination = response.data.pagination;\n  //       console.log(response);\n  //       this.isLoading = false;\n  //     } catch (error) {\n  //       console.error(error);\n  //     }\n  //   },\n\n  //   async getProduct(id: string) {\n  //     try {\n  //       const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/product/${id}`;\n  //       const response = await axios.get(api);\n  //       this.product = response.data.product;\n  //       console.log(response);\n  //     } catch (error) {\n  //       console.error(error);\n  //     }\n  //   },\n\n  //   async getCartsItem() {\n  //     try {\n  //       const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/cart`;\n  //       const response = await axios.get(api);\n  //       this.cartsItem = response.data.data.carts;\n  //       this.total = response.data.data.total;\n  //       this.final_total = response.data.data.final_total;\n  //       console.log(response);\n  //       console.log(this.cartsItem);\n  //     } catch (error) {\n  //       console.error(error);\n  //     }\n  //   },\n  //   async checkSingIn() {\n  //     const api = `${config.API_PATH}/api/user/check`;\n  //     try {\n  //       const response = await axios.post(api);\n  //       if (response.data.success) {\n  //         this.signInCheck = true;\n  //       } else {\n  //         this.signInCheck = false;\n  //       }\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   },\n\n  //   async getCouponList(page = 1) {\n  //     try {\n  //       const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/coupons?page=${page}`;\n  //       const response = await axios.get(api);\n  //       this.updateCouponList = response.data.coupons;\n  //       this.couponPagination = response.data.pagination;\n  //       console.log(response);\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   },\n\n  //   errorMessage(msg: string) {\n  //     if (this.stopMessageSwitch) return;\n  //     this.message = msg;\n  //     this.alertSwitch = true;\n  //     this.autoCloseMessage();\n  //   },\n\n  //   autoCloseMessage() {\n  //     setTimeout(() => {\n  //       this.message = \"\";\n  //       this.alertSwitch = false;\n  //     }, 5000);\n  //   },\n  // },\n});\n\nexport default useDataStore;\n","export default function (num: number): string {\n  const n = Number(num);\n  return `$${n.toFixed(0).replace(/./g, (c, i, a) => {\n    const currency =\n      i && c !== \".\" && (a.length - i) % 3 === 0\n        ? `, ${c}`.replace(/\\s/g, \"\")\n        : c;\n    return currency;\n  })}`;\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b08c9b12\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"product-wrap\" }\nconst _hoisted_2 = { class: \"products\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [\n  /*#__PURE__*/_createElementVNode(\"tr\", null, [\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"分類\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"名稱\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"原價\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"售價\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"是否啟用\"),\n    /*#__PURE__*/_createElementVNode(\"td\", null, \"編輯\")\n  ])\n], -1))\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"pagination\" }\nconst _hoisted_7 = { class: \"left-btn\" }\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = { class: \"right-btn\" }\n\nimport { ref, computed } from \"vue\";\nimport Loading from \"vue-loading-overlay\";\nimport \"vue-loading-overlay/dist/css/index.css\";\nimport useDataStore from \"../../../stores/useDataStore\";\nimport modelConfig from \"@/components/models/S01/modelConfig\";\nimport config from \"../../../../config/dev.env\";\nimport currency from \"@/utils/filters/currency\";\nimport errInterceptors from \"@/errInterceptors\";\n\ninterface EditProducts {\n  category: string;\n  content: string;\n  description: string;\n  id: string;\n  imageUrl: string;\n  is_enabled: number;\n  origin_price: number;\n  price: number;\n  title: string;\n  unit: string;\n  num: number;\n  image: string;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\n// import axios from \"axios\";\nconst dataStore = useDataStore();\n\n// const products = ref(); //產品List\nconst modelConfigController = ref(modelConfig); //控制模型\n\nconst isLoading = ref(false);\n\n// 產品畫面顯示\nconst updateProducts = computed(() => dataStore.products);\nconst pagination = computed(() => dataStore.pagination);\n\n// // 開啟建立新產品及編輯產品開關\nconst createNewProduct = () => {\n  return (\n    (modelConfigController.value.editProducts = false),\n    (modelConfigController.value.createNewProduct = true)\n  );\n};\n\n// 刪除產品\n\nconst deleteProducts = async (id: string) => {\n  isLoading.value = true;\n  const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/product/${id}`;\n  const response = await errInterceptors.delete(api, { data: id });\n  if (response.data.success) console.log(\"刪除商品成功\");\n  dataStore.getProducts();\n  isLoading.value = false;\n};\n\n// const deleteProducts = (id: string) => {\n//   isLoading.value = true;\n//   const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/product/${id}`;\n//   axios\n//     .delete(api, { data: id })\n//     .then((response) => {\n//       if (response.data.success) console.log(\"刪除商品成功\");\n//       dataStore.getProducts();\n//       isLoading.value = false;\n//     })\n//     .catch((error) => {\n//       console.error(error);\n//     });\n// };\n\n// const checkSingIn = async () => {\n//   const api = `${config.API_PATH}/api/user/check`;\n//   const response = await errInterceptors.post(api);\n//   if (response.data.success) {\n//     console.log(\"登入狀態為(Product):\", response.data.success);\n//   } else {\n//     console.log(\"登入狀態為(Product):\", response.data.success);\n//   }\n// };\n// checkSingIn();\nconst editProducts = (obj: EditProducts) => {\n  modelConfigController.value.createNewProduct = true;\n  modelConfigController.value.editProducts = true;\n  modelConfigController.value.productsId = obj.id;\n};\n\ndataStore.getProducts();\n// dataStore.checkSingIn();\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(Loading), {\n      active: isLoading.value,\n      \"onUpdate:active\": _cache[0] || (_cache[0] = ($event: any) => ((isLoading).value = $event))\n    }, null, 8, [\"active\"]),\n    _createElementVNode(\"div\", { class: \"create-btn\" }, [\n      _createElementVNode(\"button\", {\n        class: \"btn\",\n        onClick: createNewProduct\n      }, \"建立新的產品\")\n    ]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"table\", null, [\n        _hoisted_3,\n        _createElementVNode(\"tbody\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(updateProducts.value, (obj) => {\n            return (_openBlock(), _createElementBlock(\"tr\", {\n              key: obj.id\n            }, [\n              _createElementVNode(\"td\", null, _toDisplayString(obj.category), 1),\n              _createElementVNode(\"td\", null, _toDisplayString(obj.title), 1),\n              _createElementVNode(\"td\", null, _toDisplayString(_unref(currency)(obj.origin_price)), 1),\n              _createElementVNode(\"td\", null, _toDisplayString(_unref(currency)(obj.price)), 1),\n              _createElementVNode(\"td\", null, _toDisplayString(obj.is_enabled == 1 ? \"啟用\" : \"未啟用\"), 1),\n              _createElementVNode(\"td\", null, [\n                _createElementVNode(\"button\", {\n                  class: \"edit\",\n                  onClick: ($event: any) => (editProducts(obj))\n                }, \"編輯\", 8, _hoisted_4),\n                _createElementVNode(\"button\", {\n                  class: \"delete\",\n                  onClick: ($event: any) => (deleteProducts(obj.id))\n                }, \" 刪除 \", 8, _hoisted_5)\n              ])\n            ]))\n          }), 128))\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (_unref(dataStore).getProducts(pagination.value.current_page - 1)), [\"prevent\"])),\n          class: _normalizeClass([\"left\", { disabled: !pagination.value.has_pre }])\n        }, \" << \", 2)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pagination.value.total_pages, (pages, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"pages-btn\",\n          key: index\n        }, [\n          _createElementVNode(\"button\", {\n            class: _normalizeClass([\n            `pages-${pages}`,\n            { active: pagination.value.current_page === pages },\n          ]),\n            onClick: _withModifiers(($event: any) => (_unref(dataStore).getProducts(pages)), [\"prevent\"])\n          }, _toDisplayString(pages), 11, _hoisted_8)\n        ]))\n      }), 128)),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[2] || (_cache[2] = _withModifiers(($event: any) => (_unref(dataStore).getProducts(pagination.value.current_page + 1)), [\"prevent\"])),\n          class: _normalizeClass([\"right\", { disabled: !pagination.value.has_next }])\n        }, \" >> \", 2)\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"product-wrap\">\n    <loading v-model:active=\"isLoading\" />\n    <div class=\"create-btn\">\n      <button class=\"btn\" @click=\"createNewProduct\">建立新的產品</button>\n    </div>\n    <div class=\"products\">\n      <table>\n        <thead>\n          <tr>\n            <td>分類</td>\n            <td>名稱</td>\n            <td>原價</td>\n            <td>售價</td>\n            <td>是否啟用</td>\n            <td>編輯</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"obj in updateProducts\" :key=\"obj.id\">\n            <td>{{ obj.category }}</td>\n            <td>{{ obj.title }}</td>\n            <td>{{ currency(obj.origin_price) }}</td>\n            <td>{{ currency(obj.price) }}</td>\n            <td>{{ obj.is_enabled == 1 ? \"啟用\" : \"未啟用\" }}</td>\n            <td>\n              <button class=\"edit\" @click=\"editProducts(obj)\">編輯</button>\n              <button class=\"delete\" @click=\"deleteProducts(obj.id)\">\n                刪除\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"pagination\">\n      <div class=\"left-btn\">\n        <button\n          @click.prevent=\"dataStore.getProducts(pagination.current_page - 1)\"\n          class=\"left\"\n          :class=\"{ disabled: !pagination.has_pre }\"\n        >\n          &lt;&lt;\n        </button>\n      </div>\n\n      <div\n        class=\"pages-btn\"\n        v-for=\"(pages, index) in pagination.total_pages\"\n        :key=\"index\"\n      >\n        <button\n          :class=\"[\n            `pages-${pages}`,\n            { active: pagination.current_page === pages },\n          ]\"\n          @click.prevent=\"dataStore.getProducts(pages)\"\n        >\n          {{ pages }}\n        </button>\n      </div>\n      <div class=\"right-btn\">\n        <button\n          @click.prevent=\"dataStore.getProducts(pagination.current_page + 1)\"\n          class=\"right\"\n          :class=\"{ disabled: !pagination.has_next }\"\n        >\n          >>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n// import axios from \"axios\";\nimport { ref, computed } from \"vue\";\nimport Loading from \"vue-loading-overlay\";\nimport \"vue-loading-overlay/dist/css/index.css\";\nimport useDataStore from \"../../../stores/useDataStore\";\nimport modelConfig from \"@/components/models/S01/modelConfig\";\nimport config from \"../../../../config/dev.env\";\nimport currency from \"@/utils/filters/currency\";\nimport errInterceptors from \"@/errInterceptors\";\n\ninterface EditProducts {\n  category: string;\n  content: string;\n  description: string;\n  id: string;\n  imageUrl: string;\n  is_enabled: number;\n  origin_price: number;\n  price: number;\n  title: string;\n  unit: string;\n  num: number;\n  image: string;\n}\n\nconst dataStore = useDataStore();\n\n// const products = ref(); //產品List\nconst modelConfigController = ref(modelConfig); //控制模型\n\nconst isLoading = ref(false);\n\n// 產品畫面顯示\nconst updateProducts = computed(() => dataStore.products);\nconst pagination = computed(() => dataStore.pagination);\n\n// // 開啟建立新產品及編輯產品開關\nconst createNewProduct = () => {\n  return (\n    (modelConfigController.value.editProducts = false),\n    (modelConfigController.value.createNewProduct = true)\n  );\n};\n\n// 刪除產品\n\nconst deleteProducts = async (id: string) => {\n  isLoading.value = true;\n  const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/product/${id}`;\n  const response = await errInterceptors.delete(api, { data: id });\n  if (response.data.success) console.log(\"刪除商品成功\");\n  dataStore.getProducts();\n  isLoading.value = false;\n};\n\n// const deleteProducts = (id: string) => {\n//   isLoading.value = true;\n//   const api = `${config.API_PATH}/api/${config.CUSTOM_PATH}/admin/product/${id}`;\n//   axios\n//     .delete(api, { data: id })\n//     .then((response) => {\n//       if (response.data.success) console.log(\"刪除商品成功\");\n//       dataStore.getProducts();\n//       isLoading.value = false;\n//     })\n//     .catch((error) => {\n//       console.error(error);\n//     });\n// };\n\n// const checkSingIn = async () => {\n//   const api = `${config.API_PATH}/api/user/check`;\n//   const response = await errInterceptors.post(api);\n//   if (response.data.success) {\n//     console.log(\"登入狀態為(Product):\", response.data.success);\n//   } else {\n//     console.log(\"登入狀態為(Product):\", response.data.success);\n//   }\n// };\n// checkSingIn();\nconst editProducts = (obj: EditProducts) => {\n  modelConfigController.value.createNewProduct = true;\n  modelConfigController.value.editProducts = true;\n  modelConfigController.value.productsId = obj.id;\n};\n\ndataStore.getProducts();\n// dataStore.checkSingIn();\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./index.scss\";\n</style>\n","import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./index.vue?vue&type=style&index=0&id=b08c9b12&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b08c9b12\"]])\n\nexport default __exports__"],"names":["modelConfig","createNewProduct","createNewCoupon","checkProductSwitch","editProducts","productsId","editCoupon","couponId","userDataSwitch","useDataStore","defineStore","id","state","products","product","cartsItem","pagination","category","current_page","has_next","has_pre","total_pages","message","alertSwitch","stopMessageSwitch","isLoading","final_total","total","updateCouponList","couponPagination","signInCheck","getters","getLoginStatus","actions","getProducts","page","this","api","config","API_PATH","CUSTOM_PATH","response","errInterceptors","get","data","console","log","getProduct","getCartsItem","carts","getCouponList","coupons","errorMessage","msg","autoCloseMessage","setTimeout","actionLoginStatus","num","n","Number","toFixed","replace","c","i","a","currency","length","_withScopeId","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_defineComponent","__name","setup","__props","dataStore","modelConfigController","ref","updateProducts","computed","value","deleteProducts","async","delete","success","obj","_ctx","_cache","_openBlock","_createElementBlock","_createVNode","_unref","Loading","active","$event","onClick","_Fragment","_renderList","key","_toDisplayString","title","origin_price","price","is_enabled","_withModifiers","_normalizeClass","disabled","pages","index","__exports__"],"sourceRoot":""}